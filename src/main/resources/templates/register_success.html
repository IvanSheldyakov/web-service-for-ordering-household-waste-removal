<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Регистрация завершена</title>
    <link rel="stylesheet" th:href="@{/css/registration.css}">
</head>
<body>
<div th:replace="~{fragments/layout :: header('Регистрация пользователя')}"></div>
<main class="app-shell">
    <section class="card">
        <h2>Регистрация завершена</h2>
        <p><strong>User ID:</strong> <span th:text="${result.userId}">0</span></p>
        <p><strong>Тип пользователя:</strong> <span th:text="${result.userTypeName}">ACHIEVER</span></p>
        <p>
            <strong>Баланс:</strong>
            total=<span th:text="${result.balances.totalPoints}">0</span>,
            current=<span th:text="${result.balances.currentPoints}">0</span>
        </p>
    </section>

    <section class="card">
        <h2>Мотивационный блок</h2>

        <div th:if="${result.userTypeName == 'ACHIEVER'}">
            <p>Текущий уровень: <span th:text="${result.motivationBlock.currentLevelRequiredPoints}">1000</span> required_total_points</p>
            <div class="progress">
                <div class="progress-bar" th:style="'width:' + ${result.motivationBlock.progressPercentToNextLevel} + '%'"></div>
            </div>
            <p th:text="${result.motivationBlock.message}">Описание</p>
        </div>

        <div th:if="${result.userTypeName == 'SOCIALIZER'}">
            <p>Район (postal_code): <span th:text="${result.motivationBlock.postalCode}">000000</span></p>
            <p th:text="${result.motivationBlock.message}">Рейтинг появится после первых действий.</p>
        </div>

        <div th:if="${result.userTypeName == 'EXPLORER'}">
            <p th:text="${result.motivationBlock.message}">Изучайте карточки.</p>
            <ul>
                <li th:each="card : ${result.infoCards}">
                    <strong th:text="${card.title}">Заголовок</strong>
                    <p th:text="${card.description}">Описание</p>
                </li>
            </ul>
        </div>
    </section>

    <section class="card">
        <h2>Назначенные эко-задания</h2>
        <ul>
            <li th:each="task : ${result.ecoTasks}">
                <strong th:text="${task.title}">Название</strong>
                <p th:text="${task.description}">Описание</p>
                <p>
                    Очки: <span th:text="${task.points}">0</span>,
                    действует до:
                    <span th:text="${#temporals.format(task.expiredAt, 'yyyy-MM-dd HH:mm:ss XXX')}">2026-01-01</span>
                </p>
            </li>
        </ul>
    </section>

    <section class="card">
        <h2>Возможные достижения</h2>
        <ul>
            <li th:each="achievement : ${result.achievements}">
                <strong th:text="${achievement.title}">Название</strong>
                <p th:text="${achievement.description}">Описание</p>
            </li>
        </ul>
    </section>
</main>
</body>
</html>
